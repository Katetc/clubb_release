# $Id: linux_ia32_pg.in,v 1.2 2008-06-04 20:28:15 dschanen Exp $
# Makefile definitions customized for Linux IA32 using the Portland Group
# compiler

# == Paths ==
# This is where the make command is going to put the resulting files
PREFIX = ..
BINDIR = $(PREFIX)/bin
LIBDIR = $(PREFIX)/lib

# == Compiler invocation ==
FC = pgf90

# == Debugging ==
DEBUG = -g -C -Kieee

# == Machine specific options ==
ARCH = -tp piii #	PGF90, Pentium III
#ARCH = -tp p7 #		PGF90, Pentium IV

# == Optimization ==
OPTIMIZE = -O2

# == NetCDF Location ==
NC_LOC = $(HOME)/netcdf-3.6.0-p1

# == LAPACK libraries ==
# Portland group usually has static versions of these
LAPACK = -llapack -lblas

# == Linking Flags ==
LDFLAGS = -L$(LIBDIR) -Wl,-rpath $(LIBDIR) -lhoc_param -lhoc_bugsrad -L$(NC_LOC)/lib -lnetcdf $(LAPACK)

# == Compiler flags (all) ==
# Preprocessing:
#   -DSTATS enables statistics
#   -DSCALARS enables passive scalars
#   -DBIG_ENDIAN_IO use only if compiler performs big endian file i/O
#                   regardless of internal representation
#   -DLITTLE_ENDIAN_IO use only if compiler performs little endian file i/O
#                   regardless of internal representation
#   -Dradoffline and -Dnooverlap (see bugsrad documentation)
# Add -KPIC when using shared libraries
# You will need to `make clean' if you change these

FCFLAGS = $(ARCH) $(OPTIMIZE) -DSTATS -DNETCDF -Dnooverlap -Dradoffline -I$(NC_LOC)/include
#FCFLAGS = $(ARCH) $(DEBUG) -DSTATS -DNETCDF -Dnooverlap -Dradoffline -I$(NC_LOC)/include

# == Static library processing ==
AR = ar
ARFLAGS = cru
RANLIB = ranlib

# == Shared library processing ==
SHARED = $(FC)
SHAREDFLAGS = -KPIC -shared
