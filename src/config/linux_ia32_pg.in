# $Id: linux_ia32_pg.in,v 1.4 2008-07-30 19:17:37 dschanen Exp $
# Makefile definitions customized for Linux IA32 using the Portland Group
# compiler

# == Paths ==
# This is where the make command is going to put the resulting files
PREFIX = ..
BINDIR = $(PREFIX)/bin
LIBDIR = $(PREFIX)/lib

# == Compiler invocation ==
FC = pgf90

# == Debugging ==
DEBUG = -g -C -Kieee

# == Machine specific options ==
ARCH = -tp piii #	PGF90, Pentium III
#ARCH = -tp p7 #		PGF90, Pentium IV

# == Optimization ==
OPTIMIZE = -O2

# == NetCDF Location ==
NC_LOC = $(HOME)/netcdf-3.6.0-p1

# == LAPACK libraries ==
# Portland group usually has static versions of these
LAPACK = -llapack -lblas

# == Linking Flags ==
LDFLAGS = -L$(LIBDIR) -Wl,-rpath $(LIBDIR) -lhoc_param -lhoc_bugsrad -L$(NC_LOC)/lib -lnetcdf $(LAPACK)

# == Compiler flags (all) ==
# Preprocessing Directives:
#   -DNETCDF enables netCDF output
#   -DCOAMPS_MICRO enables COAMPS microphysics scheme
#   -DTUNER enables the tuning application
#   -Dradoffline and -Dnooverlap (see bugsrad documentation)
# You will need to `make clean' if you change these
# Use -I<include path> to set a module or header file directory

FCFLAGS = $(ARCH) $(OPTIMIZE)   -DNETCDF -DTUNER -DCOAMPS_MICRO -Dnooverlap -Dradoffline -I$(NC_LOC)/include
#FCFLAGS = $(ARCH) $(DEBUG)   -DNETCDF -DTUNER -DCOAMPS_MICRO -Dnooverlap -Dradoffline -I$(NC_LOC)/include

# == Static library processing ==
AR = ar
ARFLAGS = cru
RANLIB = ranlib

# == Shared library processing ==
SHARED = $(FC)
SHAREDFLAGS = -KPIC -shared
