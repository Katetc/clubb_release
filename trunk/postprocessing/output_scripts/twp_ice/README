twp_ice_profiles_creator.m is the file responsible for changing GrADS output from CLUBB for TWP_ICE into the netCDF file containing profiles requested for the TWP_ICE SCM intercomparison. It requires header_read.m and read_grads_clubb_endian.m in order to read GrADS data. It uses MATLAB R2008b's built in netCDF functions in order to write out the file.

twp_ice_timeseries_creator.m is the file responsible for changing GrADS output from CLUBB for TWP_ICE into the netCDF containing timeseries file requested for the TWP_ICE SCM intercomparison. It requires header_read.m and read_grads_clubb_endian.m in order to read GrADS data. It uses MATLAB R2008b's built in netCDF functions in order to write out the file.

create_output.bash is a driver for the above two scripts. Assuming TWP_ICE GrADS output is in clubb/output, the script runs the above two MATLAB scripts and creates two output files, profiles.CLUBB_p00.nc which contains the profiles and timeseries.CLUBB_p00.nc which contains the timeseries.

twp_ice_output_plot.m is a MATLAB script that is used to verify the submission ready NetCDF output generated by the above scripts. It relies on both mexnc2 and NetCDF toolbox to function. It recreates figure 1 (output as twp_ice_precip_verify.pdf), 2a (output as twp_ice_monsoon_verify.pdf), and 2b (output as twp_ice_suppressed_monsoon_verify.pdf) from the case setup document (which is available at http://www.giss.nasa.gov/staff/afridlind/twp-ice/model/index.html). It outputs the plots in PDF files. After it has created those plots, it calls the below two MATLAB scripts.

twp_ice_profiles_plot.m is a MATLAB script that loops through each variable in the submission profile NetCDF files and outputs an average profile to a PDF file. Each ensemble member's average is overplotted. An example output file name would be twp_ice_CF_verify.pdf for the combined plot of every ensemble's cloud fraction average.

twp_ice_timeseries_plot.m is a MATLAB script that loops through each variable in the submission timeseries NetCDF files and outputs a plot of the entire timeseries to a PDF file. Each ensemble member's timeseries is overplotted. An example output file name would be twp_ice_LWP_verify.pdf for the combined plot of every ensemble's liquid water path.

verify_output.bash is a driver for twp_ice_output_plot.m. It essentially saves you from having to remember sudo syntax.


NOTE: Both twp_ice_profiles_creator.m and twp_ice_timeseries_creator.m have a variable called t_start defined near the beginning of the script. This allows you to set the starting timestep that will make it in to the submission ready NetCDF file. For the TWP_ICE ensemble as specified by Laura Davies, t_start should be defined as 22. For the best estimate, t_start should be set to 70.
